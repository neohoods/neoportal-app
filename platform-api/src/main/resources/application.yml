server:
  port: 8486
  ssl:
    enabled: false
  servlet:
    context-path: /api
  session:
    cookie:
      secure: true
      same-site: none
      http-only: true

management:
  tracing:
    enabled: true
    sampling:
      probability: 1.0
    otlp:
      endpoint: http://tempo.observability.svc.cluster.local:4317
  endpoints:
    web:
      base-path: /api/actuator
      exposure:
        include: health,info,metrics,prometheus
  otlp:
    metrics:
      export:
        enabled: false
        url: http://grafana-k8s-monitoring-alloy-receiver.monitoring.svc.cluster.local:4318/v1/metrics
  metrics:
    export:
      otlp:
        enabled: false # Disabled in local development
        url: http://otel-collector.observability.svc.cluster.local:4317/v1/metrics
    tags:
      application: neohoods-platform-api
      version: ${project.version:unknown}
      environment: ${SPRING_PROFILES_ACTIVE:production}
openapi:
  portalNeoHoods:
    base-path: /api

neohoods:
  portal:
    base-url: https://local.portal.neohoods.com:4200
    frontend-url: https://local.portal.neohoods.com:4200
    email:
      template:
        logo-url: ${neohoods.portal.frontend-url}/terres-de-laya-logo-bright.png
        app-name: Terres de Laya
        leafs-url: ${neohoods.portal.frontend-url}/leafs-primary-left.png
        leafs-accent-url: ${neohoods.portal.frontend-url}/leafs-accent.png
        notifications-url: ${neohoods.portal.frontend-url}/hub/settings/notifications
    cleaning:
      calendar:
        jwt-secret: ${CLEANING_CALENDAR_JWT_SECRET:change-me-in-production}
        jwt-expiration-hours: 8760
    auth0:
      domain: ${AUTH0_DOMAIN:terresdelaya.eu.auth0.com}
      client-id: ${AUTH0_CLIENT_ID}
      client-secret: ${AUTH0_CLIENT_SECRET}
      audience: ${AUTH0_AUDIENCE:https://terresdelaya.eu.auth0.com/api/v2/}
      connection: ${AUTH0_CONNECTION:Username-Password-Authentication}
mailersend:
  api-key: ${MAILERSEND_API_KEY}
  from:
    email: dev@mail.neohoods.com
    name: portal NeoHoods Local environment

ttlock:
  api-url: ${TTLOCK_API_URL:https://api.ttlock.com}
  api-key: ${TTLOCK_API_KEY:}
  device-id: ${TTLOCK_DEVICE_ID:}

nuki:
  api-url: ${NUKI_API_URL:https://api.nuki.io}
  token: ${NUKI_TOKEN:}

stripe:
  secret-key: ${STRIPE_SECRET_KEY:sk_test_dummy}
  publishable-key: ${STRIPE_PUBLISHABLE_KEY:pk_test_dummy}
  webhook-secret: ${STRIPE_WEBHOOK_SECRET:whsec_dummy}

app:
  base-url: ${APP_BASE_URL:http://localhost:4200}
spring:
  datasource:
    url: jdbc:postgresql://localhost:8433/neohoods-portal
    username: local
    password: local
  jpa:
    hibernate:
      ddl-auto: none # "update" pour dev, "validate" ou "none" pour prod
    show-sql: false # Affiche les requêtes SQL dans les logs
    properties:
      hibernate:
        format_sql: true # Formate les requêtes SQL pour meilleure lisibilité
        use_sql_comments: true # Ajoute des commentaires dans les requêtes SQL

logging:
  level:
    org.hibernate.SQL: ERROR
    org.hibernate.type.descriptor.sql.BasicBinder: ERROR
    org.hibernate.type.descriptor.sql.BasicExtractor: ERROR
  pattern:
    level: "%5p [traceId=%X{trace_id:-}, spanId=%X{span_id:-}] %logger{36} - %msg%n"
