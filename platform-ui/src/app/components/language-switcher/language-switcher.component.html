<tui-badged-content>
    <img
        alt="Current language flag"
        size="s"
        tuiBadge
        tuiSlot="bottom"
        [src]="flags.get(getLanguageNameFromCode(translate.currentLang || 'en')) | tuiFlag"
    >

    <button
        class="language-switcher-button"
        appearance="outline-grayscale"
        size="s"
        tuiButton
        tuiDropdownOpen
        type="button"
        [tuiDropdown]="dropdown"
        [iconStart]="icons.languages"
    >
        {{ language.value ? ('languageSwitcher.' + language.value.toLowerCase() | translate) : 'Language' }}
    </button>

    <ng-template #dropdown>
        <tui-data-list>
            <tui-opt-group [label]="'languageSwitcher.chooseLanguage' | translate">
                <button
                    *ngFor="let name of names"
                    tuiOption
                    type="button"
                    (click)="setLang(name)"
                >
                    <img
                        alt="{{name}} flag"
                        class="t-flag"
                        [src]="flags.get(name) | tuiFlag"
                    >
                    {{ 'languageSwitcher.' + name | translate }}
                </button>
            </tui-opt-group>
        </tui-data-list>
    </ng-template>
</tui-badged-content>
