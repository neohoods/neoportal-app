<tui-root>
  <!-- Position drawer inside the example block -->
  <div class="custom-portal"><ng-container #viewContainer /></div>

  <!-- Header -->
  <header tuiNavigationHeader>
    <span class="logo-container" tuiNavigationLogo routerLink="/hub/">
      <img id="logo" src="/logo-simple.png" />
      <span tuiFade>{{ environment.brandDisplayName }}</span>
    </span>
    <hr />

    <notifications-popup></notifications-popup>

    <div id="userSettingsMenu">
      @if (user.user.avatarUrl) {
        <tui-avatar
          tuiChevron
          tuiDropdownOpen
          [tuiDropdown]="settings" 
          class="tui-space_horizontal-4">
          <picture>
              <source
                  media="(min-width: 600px)"
                  [srcset]="user.user.avatarUrl"
              />
              <img
                  alt="Alex Inkin"
                  [src]="user.user.avatarUrl"
              />
          </picture>
      </tui-avatar>
      } @else {
      <tui-avatar 
          class="user-avatar"      
          tuiChevron
          tuiDropdownOpen
          [tuiDropdown]="settings" 
          [src]="user.username | tuiInitials"
          [style.background]="
            user.username | tuiAutoColor
          "
          size="s">
        </tui-avatar>
      }
    </div>
    <ng-template #settings>
      <tui-data-list>
        <a
          routerLink="/hub/settings/profile"
          class="dropdown"
          tuiOption
        >
          <tui-icon icon="@tui.user" [style.width.px]="16" />
          Sign in as {{ user.username }}
        </a>
        <a
          routerLink="/hub/settings"
          class="dropdown"
          tuiOption
        >
          <tui-icon icon="@tui.settings" [style.width.px]="16" />
          {{ 'hubLayout.settings' | translate }}
        </a>
        <a
          routerLink="/admin/"
          class="dropdown"
          tuiOption
        >
          <tui-icon icon="@tui.lock" [style.width.px]="16" />
          {{ 'hubLayout.adminPanel' | translate }}
        </a>
        <a
          routerLink="/auth/sign-out"
          class="dropdown"
          tuiOption
        >
          <tui-icon icon="@tui.log-out" [style.width.px]="16" />
          {{ 'hubLayout.logOut' | translate }}
        </a>
      </tui-data-list>
    </ng-template>
  </header>

  <!-- Horizontal Menu -->
  <nav id="menu" class="horizontal-menu">
    <!-- Buttons -->

    <applications></applications>
  
  </nav>


  <!-- Main Content -->
  <div [style.display]="'flex'">
    <main tuiNavigationMain>
      <router-outlet></router-outlet>
    </main>
  </div>

  <tos-footer></tos-footer>

  <!-- Profile Completion Check -->
  <app-profile-completion-check></app-profile-completion-check>
</tui-root>
