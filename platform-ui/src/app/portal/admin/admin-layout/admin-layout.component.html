<tui-root>
  <!-- Ignore this part, it is only here to position drawer inside the example block -->
  <div class="custom-portal"><ng-container #viewContainer /></div>
  <header tuiNavigationHeader>
    <span tuiNavigationLogo>
      <img id="logo" src="/logo-simple.png" />
          <span tuiFade>{{ appConfig.brandDisplayName }}</span>
    </span>
    <hr />

    <div id="userSettingsMenu">
      @if (user.user.avatarUrl) {
        <tui-avatar
          tuiDropdownOpen
          [tuiDropdown]="settings" 
          class="user-avatar">
          <picture>
              <source
                  media="(min-width: 600px)"
                  [srcset]="user.user.avatarUrl"
              />
              <img
                  alt="User Avatar"
                  [src]="user.user.avatarUrl"
              />
          </picture>
        </tui-avatar>
      } @else {
        <tui-avatar 
            class="user-avatar"
            tuiDropdownOpen
            [tuiDropdown]="settings" 
            [src]="user.username | tuiInitials"
            [style.background]="user.username | tuiAutoColor"
            size="s">
        </tui-avatar>
      }
    </div>
    <ng-template #settings>
      <tui-data-list tuiDataListDropdownManager>
        <button
          tuiOption
          new
          type="button"
          (click)="navigateTo('/hub')"
        >
          <tui-icon icon="@tui.users" [style.width.px]="16" />
          {{ 'adminLayout.hubPortal' | translate }}
        </button>
        <button
          tuiOption
          new
          type="button"
          (click)="navigateTo('/hub/settings/units')"
        >
          <tui-icon icon="@tui.home" [style.width.px]="16" />
          {{ 'hubLayout.units' | translate }}
        </button>
        <button
          tuiOption
          new
          type="button"
          (click)="navigateTo('/auth/sign-out')"
        >
          <tui-icon icon="@tui.log-out" [style.width.px]="16" />
          {{ 'adminLayout.logOut' | translate }}
        </button>
      </tui-data-list>
    </ng-template>
  </header>

  <nav id="menu" class="horizontal-menu">

    <a (click)="closeMore()" routerLink="/admin/infos/" routerLinkActive="active"
      appearance="secondary-grayscale" type="button" i18n="@@borrowItemButton">
      <tui-icon icon="@tui.info" />
      {{ 'adminLayout.infos' | translate }}
    </a>
    
    <a routerLink="/admin/users/" routerLinkActive="active" appearance="secondary-grayscale"
      type="button" i18n="@@borrowItemButton">
      <tui-icon icon="@tui.users" />
      {{ 'adminLayout.users' | translate }}
    </a>
    <a (click)="closeMore()" routerLink="/admin/units" routerLinkActive="active" appearance="secondary-grayscale"
      type="button" i18n="@@borrowItemButton">
      <tui-icon icon="@tui.home" />
      {{ 'adminLayout.units' | translate }}
    </a>
    <a (click)="closeMore()" routerLink="/admin/pages/" routerLinkActive="active" appearance="secondary-grayscale"
      type="button" i18n="@@borrowItemButton">
      <tui-icon icon="@tui.book-open-text" />
      {{ 'adminLayout.pages' | translate }}
    </a>
    
    <a (click)="closeMore()" routerLink="/admin/newsletters/" routerLinkActive="active" appearance="secondary-grayscale"
      type="button" i18n="@@borrowItemButton">
      <tui-icon icon="@tui.mail" />
      {{ 'adminLayout.newsletters' | translate }}
    </a>
    
    <a (click)="closeMore()" routerLink="/admin/email-templates/" routerLinkActive="active" appearance="secondary-grayscale"
      type="button" i18n="@@borrowItemButton">
      <tui-icon icon="@tui.file-text" />
      {{ 'adminLayout.emailTemplates' | translate }}
    </a>
    
    <button tuiButton tuiChevron type="button" appearance="flat" class="spaces-dropdown" [tuiDropdown]="spacesDropdownContent"
      [tuiDropdownManual]="openSpacesDropdown" (click)="onClickSpacesDropdown()" (tuiActiveZoneChange)="onSpacesActiveZone($event)"
      (tuiObscured)="onSpacesObscured($event)">
      <tui-icon icon="@tui.home" />
      {{ 'adminLayout.spacesManagement' | translate }}
      <ng-template #spacesDropdownContent>
        <tui-data-list>
          <a
            (click)="closeSpacesDropdown()"
            routerLink="/admin/spaces/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.home" [style.width.px]="16" />
            {{ 'adminLayout.spaces' | translate }}
          </a>
          <a
            (click)="closeSpacesDropdown()"
            routerLink="/admin/reservations/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.calendar" [style.width.px]="16" />
            {{ 'adminLayout.reservations' | translate }}
          </a>
          <a
            (click)="closeSpacesDropdown()"
            routerLink="/admin/digital-locks/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.key" [style.width.px]="16" />
            {{ 'adminLayout.digitalLocks' | translate }}
          </a>
          <a
            (click)="closeSpacesDropdown()"
            routerLink="/admin/settings/spaces/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.settings" [style.width.px]="16" />
            {{ 'adminLayout.spaceSettings' | translate }}
          </a>
        </tui-data-list>
      </ng-template>
    </button>



    @if (mobile) {
    <button tuiButton tuiChevron type="button" appearance="flat" class="more-button" [tuiDropdown]="dropdownContent"
      [tuiDropdownManual]="openMore" (click)="onClickMore()" (tuiActiveZoneChange)="onActiveZone($event)"
      (tuiObscured)="onObscured($event)">
      {{ 'adminLayout.more' | translate }}
      <ng-template #dropdownContent>
        <tui-data-list>
          <a
            (click)="closeMore()"
            routerLink="/admin/applications/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.app-window-mac" [style.width.px]="16" />
            {{ 'adminLayout.applications' | translate }}
          </a>
          <a
            (click)="closeMore()"
            routerLink="/admin/units"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.users" [style.width.px]="16" />
            {{ 'adminLayout.units' | translate }}
          </a>
          <a
            (click)="closeMore()"
            routerLink="/admin/security/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.shield" [style.width.px]="16" />
            {{ 'adminLayout.security' | translate }}
          </a>
          <a
            (click)="closeMore()"
            routerLink="/admin/spaces/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.home" [style.width.px]="16" />
            {{ 'adminLayout.spaces' | translate }}
          </a>
          <a
            (click)="closeMore()"
            routerLink="/admin/reservations/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.calendar" [style.width.px]="16" />
            {{ 'adminLayout.reservations' | translate }}
          </a>
          <a
            (click)="closeMore()"
            routerLink="/admin/ttlink/"
            class="dropdown"
            tuiOption
          >
            <tui-icon icon="@tui.key" [style.width.px]="16" />
            {{ 'adminLayout.ttlink' | translate }}
          </a>
        </tui-data-list>
      </ng-template>
    </button>
    } @else {

    <a (click)="closeMore()" routerLink="/admin/applications/" routerLinkActive="active"
      appearance="secondary-grayscale" type="button" i18n="@@borrowItemButton">
      <tui-icon icon="@tui.app-window-mac" />
      {{ 'adminLayout.applications' | translate }}
    </a>
    <a routerLink="/admin/security/" routerLinkActive="active" appearance="secondary-grayscale"
    type="button" i18n="@@borrowItemButton">
    <tui-icon icon="@tui.shield" />
    {{ 'adminLayout.security' | translate }}
  </a>

    }
  </nav>


  <div [style.display]="'flex'">
    <main tuiNavigationMain>
      <router-outlet></router-outlet>
    </main>
  </div>

  <tos-footer></tos-footer>
</tui-root>